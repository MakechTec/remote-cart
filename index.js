"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};exports.__esModule=true;exports.RemoteCart=void 0;var axios_1=require("axios");var RemoteCart=function(){function RemoteCart(host,defaultUrls){if(host===void 0){host="http://localhost:8000"}if(defaultUrls===void 0){defaultUrls={}}var _this=this;this.defaultUrls={list:function(){return _this.host+"/cart/list"},clean:function(){return _this.host+"/cart/clean"},add:function(item){return _this.host+"/cart/add/".concat(item.id)},remove:function(item){return _this.host+"/cart/remove/".concat(item.id)},find:function(id){return _this.host+"/cart/find/".concat(id)},total:function(attributeName){return _this.host+"/cart/total/".concat(attributeName)},numberOfItems:function(){return _this.host+"/cart/numberOfItems"},findByAttribute:function(attribute){return _this.host+"/cart/findByAttribute/".concat(attribute.name,"/").concat(attribute.value)}};this.host=host;this.defaultUrls=__assign(__assign({},this.defaultUrls),defaultUrls)}RemoteCart.prototype.list=function(onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.list}this.simpleCall(onSuccess,makeUrl())};RemoteCart.prototype.clean=function(onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.clean}this.removeCall(onSuccess,makeUrl())};RemoteCart.prototype.add=function(item,onSuccess,makeUrl){var _this=this;if(makeUrl===void 0){makeUrl=this.defaultUrls.add}axios_1["default"].post(makeUrl(item),{attributes:JSON.stringify(item.attributes)}).then((function(response){onSuccess(response.data)}))["catch"]((function(error){_this.handleError(error)}))};RemoteCart.prototype.remove=function(item,onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.remove}this.removeCall(onSuccess,makeUrl(item))};RemoteCart.prototype.find=function(id,onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.find}this.simpleCall(onSuccess,makeUrl(id))};RemoteCart.prototype.total=function(attributeName,onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.total}this.simpleCall(onSuccess,makeUrl(attributeName))};RemoteCart.prototype.numberOfItems=function(onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.numberOfItems}this.simpleCall(onSuccess,makeUrl())};RemoteCart.prototype.findItemByAttribute=function(attribute,onSuccess,makeUrl){if(makeUrl===void 0){makeUrl=this.defaultUrls.findByAttribute}this.simpleCall(onSuccess,makeUrl(attribute))};RemoteCart.prototype.handleError=function(error){console.log(error)};RemoteCart.prototype.simpleCall=function(onSuccess,url){var _this=this;axios_1["default"].get(url).then((function(response){var data=response.data;onSuccess(data)}))["catch"]((function(error){_this.handleError(error)}))};RemoteCart.prototype.removeCall=function(onSuccess,url){var _this=this;axios_1["default"]["delete"](url).then((function(response){var data=response.data;onSuccess(data)}))["catch"]((function(error){_this.handleError(error)}))};return RemoteCart}();exports.RemoteCart=RemoteCart;